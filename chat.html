<--- chat.html -->
  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenRouter Summarizer â€” Chat</title>
    <link rel="stylesheet" href="chat.css"> <!-- Link to the CSS -->
  </head>

  <body>
    <!-- Main container for the entire chat UI -->
    <div id="chatContainer" class="chat-container">

      <!-- *** NEW: Informational Banner *** -->
      <div class="info-banner">
        Note: this chat has access to the original HTML fragment and the initial summary.
      </div>
      <!-- *** END Banner *** -->

      <!-- Error Display Area (Constrained width applied via CSS #errorDisplay) -->
      <div id="errorDisplay" style="display: none;"></div> <!-- Style moved to CSS -->

      <!-- Chat Messages Area (Takes flex space, scrolling handled here) -->
      <div id="chatMessages" class="chat-messages">
        <!-- *** ADDED INNER WRAPPER FOR WIDTH CONSTRAINT *** -->
        <div class="chat-messages-inner">
          <!-- Messages will be rendered here by chat.js -->
          <!-- Loading indicator will also be appended here -->
        </div>
        <!-- *** END INNER WRAPPER *** -->
      </div>

      <!-- Input Area Form (Contains export, model select and input row) -->
      <form id="chatForm" class="chat-form">

        <!-- *** NEW: Export Actions and Flags *** -->
        <div class="actions-row"> <!-- New container for flags and export buttons -->
          <div id="languageFlagsContainer" class="language-flags-container">
            <!-- Language flag buttons will be rendered here by chat.js -->
          </div>
          <div class="export-actions">
            <button type="button" id="copyMdBtn" class="button export-button" title="Copy chat as Markdown">Copy
              MD</button>
            <button type="button" id="downloadMdBtn" class="button export-button"
              title="Download chat as Markdown file">Download MD</button>
            <button type="button" id="downloadJsonBtn" class="button export-button"
              title="Download chat as JSON file">Download JSON</button>
          </div>
        </div>
        <!-- *** END Export Actions and Flags *** -->

        <!-- Model Selector (Constrained width applied via CSS .model-selector-area) -->
        <div class="model-selector-area">
          <label for="modelSelect">Model:</label>
          <select id="modelSelect" name="modelSelect">
            <option value="" disabled>Loading models...</option>
          </select>
        </div>

        <!-- Input Row (Constrained width applied via CSS .input-row) -->
        <!-- *** ADDED INNER WRAPPER FOR WIDTH CONSTRAINT *** -->
        <div class="input-row">
          <textarea id="chatInput" placeholder="Type your message..." rows="1"></textarea>
          <!-- Start with rows=1, let CSS handle height -->
          <button type="submit" id="sendButton">Send</button>
          <button type="button" id="stopButton" style="display: none;">Stop</button>
        </div>
        <!-- *** END INNER WRAPPER *** -->
      </form>
      <!-- End Input Area -->

    </div> <!-- End chatContainer -->

    <!-- === Scripts at the end === -->
    <script src="marked.min.js"></script> <!-- Ensure marked.min.js exists -->
    <script src="chat.js" type="module"></script> <!-- Updated to type="module" -->
    <!-- === End Scripts === -->
  </body>

  </html>
