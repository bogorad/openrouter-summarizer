<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OpenRouter Summarizer Options</title>
    <link rel="stylesheet" href="options.css"> <!-- Link to the CSS -->
</head>
<body>

<div class="container">
    <h1>OpenRouter Summarizer Options</h1>

    <!-- API Key Section -->
    <div class="section">
        <h2>API Key</h2>
        <p>Enter your API key from <a href="https://openrouter.ai/keys" target="_blank">OpenRouter.ai</a>.</p>
        <input type="password" id="apiKey" placeholder="sk-or-v1-..." class="wide-input">
        <p class="note">Your key is stored locally in your browser and only sent directly to OpenRouter.</p>
    </div>

    <!-- Model Selection Section -->
    <div class="section">
        <h2>Model Selection</h2>
        <p>Select the default model to use for summarization. You can edit the model names/IDs directly.</p>
        <div id="modelSelectionArea">
            <p>Loading models...</p>
        </div>
        <button id="addModelBtn" class="button add-button">Add Another Model</button>
         <p class="note">Use valid model strings from OpenRouter (e.g., <code>google/gemini-flash-1.5</code>, <code>openai/gpt-4o</code>). You can use <code>:nitro</code> for the fastest model or <code>:auto</code>.</p>
    </div>

    <!-- Summary Options Section -->
    <div class="section">
        <h2>Summary Options</h2>
        <div class="option-group">
            <label>Number of Bullet Points:</label>
            <div class="radio-group">
                <label><input type="radio" name="bulletCount" value="3"> 3</label>
                <label><input type="radio" name="bulletCount" value="4"> 4</label>
                <label><input type="radio" name="bulletCount" value="5" checked> 5</label>
                <label><input type="radio" name="bulletCount" value="6"> 6</label>
                <label><input type="radio" name="bulletCount" value="7"> 7</label>
                <label><input type="radio" name="bulletCount" value="8"> 8</label>
            </div>
        </div>
    </div>

    <!-- Translation Options Section -->
    <div class="section">
        <h2>Translation Options</h2>
        <!-- Updated text to reflect choosing a country/language -->
        <p>Select countries/languages for translation options, or choose "No translation needed". Start typing a country name to see suggestions.</p>
        <div id="languageSelectionArea">
            <p>Loading countries...</p>
        </div>
        <button id="addLangBtn" class="button add-button">Add Another Language Option</button> <!-- Updated button text -->
        <!-- Updated note -->
        <p class="note">Choose a country from the suggested list. The prompt will ask the LLM to translate into the language(s) commonly associated with the selected country (e.g., "France" -> French).</p>
    </div>


    <!-- Other Settings Section -->
    <div class="section">
        <h2>Other Settings</h2>
        <div class="option-group checkbox-group">
            <input type="checkbox" id="debug">
            <label for="debug">Enable Debug Logging (requires DevTools console)</label>
        </div>
    </div>

    <!-- Advanced Options / Prompt Customization Section (MOVED & COLLAPSIBLE) -->
    <div class="section">
        <h2 class="collapsible-header" id="advancedOptionsToggle" role="button" tabindex="0" aria-expanded="false">
            Advanced Options <span class="toggle-indicator">â–º</span>
        </h2>
        <div class="collapsible-content" id="advancedOptionsContent">
            <!-- Content moved inside here -->
            <h3>Prompt Customization</h3>
            <p>The system prompt sent to the LLM is constructed from the parts below. You can customize the middle formatting instructions section.</p>
            <div class="prompt-display-area">
                <div class="prompt-label">Intro:</div>
                <div class="prompt-part prompt-preamble" id="promptPreamble">
                    <!-- Preamble text will be loaded by JS -->
                </div>

                <div class="prompt-label">Translation (appears if translation selected):</div> <!-- Updated label -->
                <div class="prompt-part prompt-translation-preview" id="promptTranslationPreview">
                    <!-- Translation instructions preview loaded by JS -->
                </div>

                 <div class="prompt-label">Outro:</div>
                <div class="prompt-part prompt-postamble" id="promptPostamble">
                    <!-- Postamble text will be loaded by JS -->
                </div>
            </div>
             <!-- Updated note -->
             <p class="note">The preamble and postamble are fixed. The translation instructions appear dynamically based on your selected country/language.</p>

             <!-- Custom Instructions Input -->
            <h3 style="margin-top: 25px;">Formatting Instructions</h3>
             <p>Customize the core instructions for how the summary points should be formatted. Keep it concise.</p>
            <textarea id="promptFormatInstructions" rows="6" class="prompt-part prompt-editable" spellcheck="false">
                <!-- Editable instructions loaded/defaulted by JS -->
            </textarea>
             <p class="note">This text is inserted between the intro/language instructions and the outro.</p>


        </div>
    </div>
    <!-- End Advanced Options Section -->


    <!-- Actions Area -->
    <div class="actions">
        <button id="save" class="button save-button">Save Options</button>
        <button id="resetDefaultsBtn" class="button reset-button">Reset to Defaults</button>
        <span id="status" class="status-message"></span>
    </div>

</div>

<script src="options.js"></script>
</body>
</html>
